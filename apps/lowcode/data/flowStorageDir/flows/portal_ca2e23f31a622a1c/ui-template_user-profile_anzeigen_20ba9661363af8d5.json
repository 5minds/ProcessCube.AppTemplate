{
  "id": "20ba9661363af8d5",
  "type": "ui-template",
  "z": "ca2e23f31a622a1c",
  "group": "",
  "page": "",
  "ui": "9f39f3effcdcb077",
  "name": "User-Profile anzeigen",
  "order": 1,
  "width": 0,
  "height": 0,
  "head": "",
  "format": "<template>\n    <Teleport v-if=\"mounted\" to=\"#app-bar-actions\">\n        <div id=\"app-bar-processcube-actions\" class=\"flex flex-row flex-nowrap items-center gap-3 ml-auto\">\n        </div>\n        <div id=\"app-bar-processcube-profile\">\n            <v-btn @click=\"send({payload: 'profile'})\" variant=\"outlined\">\n                {{ username || 'Public' }}\n            </v-btn>\n        </div>\n        <div id=\"app-bar-processcube-logout\" v-if=\"isAuthenticated\">\n            <v-btn prepend-icon=\"mdi-logout\" density=\"comfortable\" @click=\"logout()\" variant=\"plain\">Abmelden</v-btn>\n        </div>\n    </Teleport>\n</template>\n<script>\n    export default {\n        props: ['msg'],\n        data() {\n            return {\n                mounted: false\n            }\n        },\n        computed: {\n            user() {\n            return this.msg?._client?.user || null\n            },\n            username() {\n            return this.user?.claims?.preferred_username || this.user?.displayName || null\n            },\n            isAuthenticated() {\n            // Nur anzeigen, wenn wirklich identifizierbar\n            return !!(this.username || this.user?.sub || this.msg?._client?.accessToken)\n            }\n        },        \n        mounted() {\n            this.mounted = true\n        },\n        methods: {\n            logout: function() {\n                window.location.href = \"/auth/dashboard/logout\";\n            }\n        },\n        watch: {\n            // l√§uft bei JEDEM eingehenden msg vom Flow\n            msg: {\n                deep: true,\n                immediate: true,\n                handler(m) {\n                    // hier verarbeitest du Events/Daten vom Backend\n                    if (this.last == m) {\n                        // nothing todo\n                    } else {\n                        this.last = JSON.stringify(m)\n                        this.send(m);\n                    }\n                }\n            }\n        }    \n    }\n</script>\n",
  "storeOutMessages": true,
  "passthru": false,
  "resendOnRefresh": true,
  "templateScope": "widget:ui",
  "className": "",
  "g": "6f350abd5e1475cc",
  "wires": [
    [
      "0b8f33f719578270"
    ]
  ]
}